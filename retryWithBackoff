async function fetchWithRetry(url, options = {}, maxRetries = 5) {
  let attempt = 0;

  while (attempt < maxRetries) {
    try {
      console.log(`Attempt ${attempt + 1}`);

      const res = await fetch(url, options);

      if (!res.ok) {
        throw new Error(`Status: ${res.status}`);
      }

      return await res.json(); // success
    } catch (err) {
      attempt++;

      if (attempt === maxRetries) {
        console.log("All retries failed âŒ");
        throw err;
      }

      // exponential backoff: 1000ms, 2000ms, 4000ms, ...
      const delay = Math.pow(2, attempt) * 1000;

      console.log(`Retrying in ${delay}ms...`);

      await new Promise((res) => setTimeout(res, delay));
    }
  }
}
